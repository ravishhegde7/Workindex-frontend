<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"/>
<meta name="theme-color" content="#FC8019"/>
<title>WorkIndex - Find Expert Professionals</title>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
html,body{height:100%;overscroll-behavior:none}
body{font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','Segoe UI',system-ui,sans-serif;background:#fff;color:#3D4152;min-height:100vh;overflow-x:hidden;-webkit-font-smoothing:antialiased}
:root{--primary:#FC8019;--primary-dark:#E67417;--bg:#FFF;--bg-gray:#F9FAFB;--border:#E9E9EB;--text:#3D4152;--text-light:#686B78;--text-muted:#93959F;--green:#48C479;--red:#E74C3C;--yellow:#F5C518;--safe-top:env(safe-area-inset-top,44px);--safe-bot:env(safe-area-inset-bottom,34px)}
.page{display:none;min-height:100vh;animation:fadeIn .25s ease}
.page.active{display:block}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
#landing{background:linear-gradient(135deg,#FFFAF6 0%,#FFF 100%);padding-top:var(--safe-top)}
.land-nav{display:flex;justify-content:space-between;align-items:center;padding:16px 20px}
.logo{display:flex;align-items:center;gap:8px}
.logo-icon{width:36px;height:36px;background:var(--primary);border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:18px;color:#fff}
.logo-text{font-size:20px;font-weight:800;color:var(--text)}
.land-btns{display:flex;gap:8px}
.btn-outline{padding:8px 16px;border:1.5px solid var(--border);border-radius:8px;background:transparent;color:var(--text);font-size:13px;font-weight:600;cursor:pointer;font-family:inherit}
.btn-primary{padding:8px 16px;border:none;border-radius:8px;background:var(--primary);color:#fff;font-size:13px;font-weight:700;cursor:pointer;font-family:inherit}
.btn-primary:active,.btn-outline:active{opacity:.8}
.hero{text-align:center;padding:60px 24px 40px}
.hero-badge{display:inline-flex;align-items:center;gap:6px;background:#FFF4ED;border:1px solid #FFDCC7;border-radius:24px;padding:6px 14px;margin-bottom:20px}
.hero-badge .dot{width:6px;height:6px;border-radius:50%;background:var(--green);animation:pulse 2s infinite}
.hero-badge span{font-size:12px;color:var(--primary);font-weight:600}
.hero h1{font-size:clamp(28px,7vw,46px);font-weight:800;line-height:1.15;letter-spacing:-.5px;color:var(--text);margin-bottom:14px}
.hero .highlight{color:var(--primary)}
.hero p{font-size:15px;color:var(--text-light);line-height:1.6;max-width:340px;margin:0 auto 32px}
.hero-actions{display:flex;flex-direction:column;gap:12px;max-width:360px;margin:0 auto}
.hero-btn{width:100%;padding:16px;border-radius:12px;border:none;font-size:16px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:transform .15s;font-family:inherit}
.hero-btn:active{transform:scale(.97)}
.hero-btn-orange{background:var(--primary);color:#fff;box-shadow:0 4px 16px rgba(252,128,25,.25)}
.hero-btn-white{background:#fff;border:1.5px solid var(--border)!important;color:var(--text)}
.features{padding:40px 20px 60px}
.features h2{text-align:center;font-size:22px;font-weight:700;color:var(--text);margin-bottom:24px}
.feat-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.feat-card{background:#fff;border:1px solid var(--border);border-radius:14px;padding:20px 16px;text-align:center}
.feat-card .icon{font-size:32px;margin-bottom:10px}
.feat-card h4{font-size:14px;font-weight:700;color:var(--text);margin-bottom:4px}
.feat-card p{font-size:12px;color:var(--text-muted);line-height:1.4}
#auth{background:#fff;padding-top:var(--safe-top);min-height:100vh}
.auth-back{margin:14px 20px 0;display:flex;align-items:center;gap:5px;background:none;border:none;color:var(--text-light);font-size:14px;font-weight:600;cursor:pointer;font-family:inherit}
.auth-wrap{padding:32px 20px 60px}
.auth-logo{text-align:center;margin-bottom:32px}
.auth-logo .logo-icon{width:44px;height:44px;font-size:20px;margin:0 auto 12px}
.auth-card{background:#fff;border:1px solid var(--border);border-radius:16px;padding:24px 20px}
.auth-toggle{display:flex;background:var(--bg-gray);border-radius:10px;padding:4px;margin-bottom:24px}
.auth-toggle button{flex:1;padding:10px;border-radius:8px;border:none;background:transparent;color:var(--text-muted);font-size:14px;font-weight:700;cursor:pointer;transition:all .2s;font-family:inherit}
.auth-toggle button.active{background:#fff;color:var(--text);box-shadow:0 2px 4px rgba(0,0,0,.06)}
.role-pick{display:flex;gap:12px;margin-bottom:24px}
.role-card{flex:1;padding:18px 12px;border:2px solid var(--border);border-radius:12px;background:#fff;text-align:center;cursor:pointer;transition:all .2s}
.role-card.active{border-color:var(--primary);background:#FFF4ED}
.role-card .r-icon{font-size:28px;margin-bottom:6px}
.role-card .r-label{font-size:14px;font-weight:700;color:var(--text)}
.field{margin-bottom:16px}
.field label{font-size:13px;font-weight:600;color:var(--text);display:block;margin-bottom:6px}
.field input,.field select,.field textarea{width:100%;padding:12px 14px;background:var(--bg-gray);border:1px solid var(--border);border-radius:10px;color:var(--text);font-size:15px;outline:none;font-family:inherit}
.field input:focus,.field select:focus,.field textarea:focus{border-color:var(--primary);background:#fff}
.field textarea{resize:none}
.phone-row{display:flex;gap:8px}
.phone-prefix{padding:12px;background:var(--bg-gray);border:1px solid var(--border);border-radius:10px;color:var(--text-light);font-size:15px;font-weight:600}
.submit-btn{width:100%;padding:14px;border-radius:10px;border:none;background:var(--primary);color:#fff;font-size:16px;font-weight:700;cursor:pointer;margin-top:8px;font-family:inherit}
.submit-btn:active{opacity:.85}
.submit-btn.disabled{background:#E9E9EB;color:var(--text-muted);cursor:not-allowed}
.auth-footer{text-align:center;margin-top:20px;font-size:13px;color:var(--text-muted)}
.auth-footer a{color:var(--primary);cursor:pointer;font-weight:600;text-decoration:none}
.verify-steps{display:flex;justify-content:center;gap:8px;margin-bottom:24px}
.v-step{flex:1;max-width:100px;height:4px;border-radius:2px;background:var(--border);transition:background .3s}
.v-step.done{background:var(--primary)}
.verify-title{text-align:center;font-size:22px;font-weight:700;margin-bottom:8px;color:var(--text)}
.verify-sub{text-align:center;font-size:14px;color:var(--text-light);margin-bottom:24px}
.otp-input{width:100%;padding:16px;text-align:center;letter-spacing:8px;font-size:22px;font-weight:700;background:var(--bg-gray);border:1px solid var(--border);border-radius:12px;color:var(--text);outline:none;font-family:'Courier New',monospace}
.otp-input:focus{border-color:var(--primary);background:#fff}
.resend{text-align:center;color:var(--primary);font-size:14px;font-weight:600;cursor:pointer;margin:14px 0 20px}
.loading{text-align:center;color:var(--text-muted);font-size:14px;padding:20px}
.error{background:#FFEBEE;border:1px solid #FFCDD2;color:#C62828;padding:12px;border-radius:8px;margin-bottom:16px;font-size:14px}
.success{background:#E8F5E9;border:1px solid #C8E6C9;color:#2E7D32;padding:12px;border-radius:8px;margin-bottom:16px;font-size:14px}
#dashboard{background:var(--bg-gray);padding-top:var(--safe-top);min-height:100vh;padding-bottom:calc(70px + var(--safe-bot))}
.dash-header{background:#fff;border-bottom:1px solid var(--border);padding:14px 20px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:40}
.avatar{width:36px;height:36px;border-radius:50%;background:var(--primary);display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;color:#fff;cursor:pointer}
.credit-badge{display:flex;align-items:center;gap:5px;padding:6px 12px;border-radius:18px;background:#FFF4ED;border:1px solid var(--primary);color:var(--primary);font-size:13px;font-weight:700;cursor:pointer}
.tab-content{padding:18px 20px}
.empty-state{text-align:center;padding:60px 20px}
.empty-state .icon{font-size:64px;margin-bottom:16px;opacity:.3}
.empty-state h3{font-size:18px;font-weight:700;color:var(--text);margin-bottom:8px}
.empty-state p{font-size:14px;color:var(--text-muted)}
.bottom-nav{position:fixed;bottom:0;left:0;right:0;background:#fff;border-top:1px solid var(--border);display:flex;padding-bottom:var(--safe-bot);z-index:50}
.nav-item{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;padding:10px 0;background:none;border:none;color:var(--text-muted);cursor:pointer;font-size:11px;font-weight:600;font-family:inherit}
.nav-item svg{width:22px;height:22px}
.nav-item.active{color:var(--primary)}
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);backdrop-filter:blur(2px);z-index:100;display:none;align-items:flex-end}
.modal-overlay.open{display:flex;animation:fadeIn .2s ease}
.modal-sheet{background:#fff;border-radius:20px 20px 0 0;width:100%;max-height:85vh;overflow-y:auto;padding:0 20px calc(24px + var(--safe-bot));animation:slideUp .25s ease}
.modal-handle{width:36px;height:4px;background:var(--border);border-radius:2px;margin:12px auto 20px}
.modal-title{font-size:20px;font-weight:700;color:var(--text);margin-bottom:8px}
.modal-subtitle{font-size:14px;color:var(--text-muted);margin-bottom:20px}
</style>
</head>
<body>

<div id="landing" class="page active">
<nav class="land-nav">
<div class="logo"><div class="logo-icon">W</div><div class="logo-text">WorkIndex</div></div>
<div class="land-btns">
<button class="btn-outline" onclick="goAuth('login')">Log In</button>
<button class="btn-primary" onclick="goAuth('signup')">Sign Up</button>
</div>
</nav>
<div class="hero">
<div class="hero-badge"><div class="dot"></div><span>2,400+ verified professionals</span></div>
<h1>Find the <span class="highlight">right expert</span> for your needs</h1>
<p>From ITR filing to app development ‚Äî connect with verified professionals instantly.</p>
<div class="hero-actions">
<button class="hero-btn hero-btn-orange" onclick="goAuth('signup','client')">üìã I need help (Client)</button>
<button class="hero-btn hero-btn-white" onclick="goAuth('signup','expert')">üíº I'm a professional (Expert)</button>
</div>
</div>
<div class="features">
<h2>How it works</h2>
<div class="feat-grid">
<div class="feat-card"><div class="icon">üìù</div><h4>Post Your Need</h4><p>Answer questions</p></div>
<div class="feat-card"><div class="icon">üëÄ</div><h4>Get Approaches</h4><p>Experts reach out</p></div>
<div class="feat-card"><div class="icon">‚úÖ</div><h4>Choose Expert</h4><p>Review & select</p></div>
<div class="feat-card"><div class="icon">ü§ù</div><h4>Get Work Done</h4><p>Connect & complete</p></div>
</div>
</div>
</div>

<div id="auth" class="page">
<button class="auth-back" onclick="goPage('landing')">
<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
Back
</button>
<div class="auth-wrap">
<div class="auth-logo"><div class="logo-icon">W</div><div class="logo-text">WorkIndex</div></div>
<div id="authForm" class="auth-card">
<div class="auth-toggle">
<button id="toggleLogin" class="active" onclick="switchAuth('login')">Log In</button>
<button id="toggleSignup" onclick="switchAuth('signup')">Sign Up</button>
</div>
<label style="font-size:13px;font-weight:600;color:var(--text);margin-bottom:8px;display:block">I am a</label>
<div class="role-pick">
<div class="role-card" id="roleClient" onclick="pickRole('client')"><div class="r-icon">üìã</div><div class="r-label">Client</div></div>
<div class="role-card" id="roleExpert" onclick="pickRole('expert')"><div class="r-icon">üíº</div><div class="r-label">Expert</div></div>
</div>
<div id="errorMsg"></div>
<div id="nameField" class="field" style="display:none"><label>Full Name</label><input type="text" id="inName" placeholder="Enter your full name"></div>
<div class="field"><label>Email Address</label><input type="email" id="inEmail" placeholder="you@example.com"></div>
<div class="field"><label>Phone Number</label><div class="phone-row"><div class="phone-prefix">+91</div><input type="tel" id="inPhone" placeholder="9876543210" maxlength="10"></div></div>
<div class="field"><label>Password</label><input type="password" id="inPass" placeholder="Create a password"></div>
<button class="submit-btn disabled" id="authSubmit" onclick="submitAuth()">Continue</button>
<div class="auth-footer" id="authFooter">Already have an account? <a onclick="switchAuth('signup')">Sign up</a></div>
</div>
<div id="verifyForm" class="auth-card" style="display:none">
<div class="verify-steps"><div class="v-step done" id="vStep0"></div><div class="v-step" id="vStep1"></div></div>
<div class="verify-title" id="verifyTitle">Verify Email</div>
<div class="verify-sub" id="verifySub">Enter the 6-digit code</div>
<div id="verifyError"></div>
<input class="otp-input" id="otpInput" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" maxlength="6" inputmode="numeric">
<div class="resend" onclick="resendOTP()">Resend code</div>
<button class="submit-btn" onclick="submitVerify()">Verify & Continue</button>
</div>
</div>
</div>

<div id="dashboard" class="page">
<div class="dash-header">
<div class="logo"><div class="logo-icon">W</div><div class="logo-text">WorkIndex</div></div>
<div style="display:flex;align-items:center;gap:10px">
<div class="credit-badge" id="creditBadge" onclick="alert('Buy credits feature coming soon!')" style="display:none">üíé <span id="credits">50</span></div>
<div class="avatar" id="avatar" onclick="logout()">U</div>
</div>
</div>
<div id="dashContent" class="tab-content"></div>
<div class="bottom-nav" id="bottomNav"></div>
</div>

<div class="modal-overlay" id="modal" onclick="closeModal()">
<div class="modal-sheet" onclick="event.stopPropagation()">
<div class="modal-handle"></div>
<div id="modalContent"></div>
</div>
</div>

<script>
const API='https://workindex-production.up.railway.app/api';
let S={role:null,user:null,userId:null,authMode:'login',token:null};

function showError(i,m){const e=document.getElementById(i);e.innerHTML=`<div class="error">${m}</div>`;setTimeout(()=>e.innerHTML='',5000)}
function showSuccess(i,m){document.getElementById(i).innerHTML=`<div class="success">${m}</div>`}
function showLoading(i){document.getElementById(i).innerHTML='<div class="loading">‚è≥ Loading...</div>'}
function goPage(i){document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));document.getElementById(i).classList.add('active');window.scrollTo(0,0)}
function goAuth(m,r){S.authMode=m;if(r)S.role=r;switchAuth(m);if(r)pickRole(r);goPage('auth')}
function switchAuth(m){S.authMode=m;document.getElementById('toggleLogin').classList.toggle('active',m==='login');document.getElementById('toggleSignup').classList.toggle('active',m==='signup');document.getElementById('nameField').style.display=m==='signup'?'block':'none';document.getElementById('authSubmit').textContent=m==='signup'?'Create Account':'Log In';document.getElementById('authFooter').innerHTML=m==='signup'?'Already have an account? <a onclick="switchAuth(\'login\')">Log in</a>':'No account? <a onclick="switchAuth(\'signup\')">Sign up</a>';document.getElementById('errorMsg').innerHTML=''}
function pickRole(r){S.role=r;document.getElementById('roleClient').classList.toggle('active',r==='client');document.getElementById('roleExpert').classList.toggle('active',r==='expert');document.getElementById('authSubmit').classList.remove('disabled')}

async function submitAuth(){
if(!S.role){showError('errorMsg','Please select your role');return}
const name=document.getElementById('inName').value.trim();
const email=document.getElementById('inEmail').value.trim();
const phone=document.getElementById('inPhone').value.trim();
const password=document.getElementById('inPass').value;
if(!email||!phone||!password){showError('errorMsg','Please fill all fields');return}
if(S.authMode==='signup'&&!name){showError('errorMsg','Please enter your name');return}
if(phone.length!==10){showError('errorMsg','Phone must be 10 digits');return}
showLoading('errorMsg');
try{
if(S.authMode==='signup'){
const r=await fetch(`${API}/auth/register`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,email,phone,password,role:S.role})});
const d=await r.json();
if(!r.ok)throw new Error(d.message||'Registration failed');
S.userId=d.userId;
S.user={name,email,phone,role:S.role};
document.getElementById('errorMsg').innerHTML='';
startVerify()
}else{
const r=await fetch(`${API}/auth/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});
const d=await r.json();
if(!r.ok)throw new Error(d.message||'Login failed');
S.token=d.token;
S.user=d.user;
localStorage.setItem('token',d.token);
localStorage.setItem('user',JSON.stringify(d.user));
initDash()
}
}catch(e){showError('errorMsg',e.message)}
}

function startVerify(){
document.getElementById('authForm').style.display='none';
document.getElementById('verifyForm').style.display='block';
document.getElementById('verifyTitle').textContent='Verify Email';
document.getElementById('verifySub').textContent=`Code sent to ${S.user.email}`
}

async function submitVerify(){
const otp=document.getElementById('otpInput').value.trim();
if(otp.length!==6){showError('verifyError','Enter 6-digit code');return}
showLoading('verifyError');
try{
if(document.getElementById('verifyTitle').textContent==='Verify Email'){
const r=await fetch(`${API}/auth/verify-email`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:S.userId,otp})});
const d=await r.json();
if(!r.ok)throw new Error(d.message||'Verification failed');
document.getElementById('verifyError').innerHTML='';
const pr=await fetch(`${API}/auth/send-phone-otp`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:S.userId})});
if(!pr.ok)throw new Error('Failed to send phone OTP');
document.getElementById('vStep1').classList.add('done');
document.getElementById('verifyTitle').textContent='Verify Phone';
document.getElementById('verifySub').textContent=`Code sent to +91 ${S.user.phone}`;
document.getElementById('otpInput').value='';
showSuccess('verifyError','Email verified! Check Railway logs for phone OTP')
}else{
const r=await fetch(`${API}/auth/verify-phone`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:S.userId,otp})});
const d=await r.json();
if(!r.ok)throw new Error(d.message||'Verification failed');
S.token=d.token;
S.user=d.user;
localStorage.setItem('token',d.token);
localStorage.setItem('user',JSON.stringify(d.user));
initDash()
}
}catch(e){showError('verifyError',e.message)}
}

async function resendOTP(){
showLoading('verifyError');
const type=document.getElementById('verifyTitle').textContent==='Verify Email'?'email':'phone';
try{
const r=await fetch(`${API}/auth/resend-otp`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:S.userId,type})});
const d=await r.json();
if(!r.ok)throw new Error(d.message||'Failed to resend');
showSuccess('verifyError','OTP resent!')
}catch(e){showError('verifyError',e.message)}
}

function initDash(){
goPage('dashboard');
const u=S.user||JSON.parse(localStorage.getItem('user')||'{}');
S.user=u;
S.token=S.token||localStorage.getItem('token');
document.getElementById('avatar').textContent=u.name?u.name[0].toUpperCase():'U';
if(u.role==='expert'){
document.getElementById('creditBadge').style.display='flex';
document.getElementById('credits').textContent=u.credits||50;
document.getElementById('bottomNav').innerHTML='<button class="nav-item active" onclick="loadRequests()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>Browse</button>'
}else{
document.getElementById('bottomNav').innerHTML='<button class="nav-item active" onclick="loadRequests()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M9 11h6M9 15h6"/></svg>Requests</button>'
}
loadRequests()
}

async function loadRequests(){
document.getElementById('dashContent').innerHTML='<div class="empty-state"><div class="icon">üìã</div><h3>Welcome to WorkIndex!</h3><p>Your dashboard is ready</p></div>'
}

function closeModal(){document.getElementById('modal').classList.remove('open')}
function logout(){localStorage.clear();S={};location.reload()}

window.addEventListener('load',()=>{
const t=localStorage.getItem('token');
const u=localStorage.getItem('user');
if(t&&u){S.token=t;S.user=JSON.parse(u);initDash()}
})
</script>
</body>
</html>
