<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"/>
<meta name="theme-color" content="#FC8019"/>
<meta name="description" content="WorkIndex - Find verified professionals for any service. Connect with expert CAs, GST consultants, photographers, developers and more."/>
<title>WorkIndex - Find Verified Professionals</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     WORKINDEX v2.0 - COMPLETE HTML
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

<!-- LANDING PAGE -->
<div id="landing" class="page active">
  <div class="landing-nav">
    <div class="logo">
      <div class="logo-icon">W</div>
      <span class="logo-text">WorkIndex</span>
    </div>
    <div style="display: flex; gap: 16px; align-items: center;">
      <a class="nav-link" onclick="showPage('findProfessionals')">Explore</a>
      <button class="btn-outline" onclick="showPage('auth')" style="padding: 8px 16px; font-size: 14px;">Login</button>
      <button class="btn-primary" onclick="showPage('auth')" style="padding: 8px 16px; font-size: 14px;">Join</button>
    </div>
  </div>

  <div class="hero">
    <div class="hero-badge">
      <div class="dot"></div>
      <span>Trusted by 10,000+ professionals</span>
    </div>
    
    <h1>Find Verified <span class="highlight">Professionals</span> for Any Service</h1>
    <p>Connect with expert CAs, GST consultants, photographers, developers and more. Get your work done with confidence.</p>
    
    <div class="hero-actions">
      <button class="hero-btn hero-btn-primary" onclick="showPage('auth')">
        <span>Find Professionals</span>
        <span>‚Üí</span>
      </button>
      <button class="hero-btn hero-btn-secondary" onclick="showPage('howItWorks')">
        <span>How It Works</span>
      </button>
    </div>

    <div style="margin-top: 40px; max-width: 600px; margin-left: auto; margin-right: auto;">
      <div style="display: flex; gap: 12px; background: #fff; padding: 8px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
        <input type="text" placeholder="What service do you need?" style="flex: 1; padding: 12px; border: none; font-size: 15px; outline: none;">
        <input type="text" placeholder="Location" style="width: 150px; padding: 12px; border: none; border-left: 1px solid var(--border); font-size: 15px; outline: none;">
        <button class="btn-primary" onclick="showPage('findProfessionals')" style="padding: 12px 24px;">Search</button>
      </div>
    </div>
  </div>

  <div class="features-section">
    <h2 class="section-title">Why Choose WorkIndex?</h2>
    <p class="section-subtitle">The easiest way to find and hire verified professionals</p>
    
    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">‚úì</div>
        <h3>Verified Professionals</h3>
        <p>All experts are verified with credentials and ratings from real clients</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">‚ö°</div>
        <h3>Quick Responses</h3>
        <p>Get personalized quotes from multiple professionals within 24 hours</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üîí</div>
        <h3>Secure & Safe</h3>
        <p>Your information is protected. Only share contact details when ready</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">‚≠ê</div>
        <h3>Rated & Reviewed</h3>
        <p>Read honest reviews from past clients to make informed decisions</p>
      </div>
    </div>
  </div>

  <div style="padding: 60px 20px; background: var(--bg-gray);">
    <h2 class="section-title">How It Works</h2>
    <div style="max-width: 1000px; margin: 40px auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 32px;">
      <div style="text-align: center;">
        <div style="width: 60px; height: 60px; border-radius: 50%; background: var(--primary); color: #fff; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 700; margin: 0 auto 16px;">1</div>
        <h4 style="font-size: 16px; font-weight: 700; margin-bottom: 8px;">Post Your Need</h4>
        <p style="font-size: 14px; color: var(--text-light);">Tell us what you need in 2 minutes</p>
      </div>
      <div style="text-align: center;">
        <div style="width: 60px; height: 60px; border-radius: 50%; background: var(--primary); color: #fff; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 700; margin: 0 auto 16px;">2</div>
        <h4 style="font-size: 16px; font-weight: 700; margin-bottom: 8px;">Get Quotes</h4>
        <p style="font-size: 14px; color: var(--text-light);">Experts send you personalized quotes</p>
      </div>
      <div style="text-align: center;">
        <div style="width: 60px; height: 60px; border-radius: 50%; background: var(--primary); color: #fff; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 700; margin: 0 auto 16px;">3</div>
        <h4 style="font-size: 16px; font-weight: 700; margin-bottom: 8px;">Choose & Hire</h4>
        <p style="font-size: 14px; color: var(--text-light);">Pick the best expert and get started</p>
      </div>
      <div style="text-align: center;">
        <div style="width: 60px; height: 60px; border-radius: 50%; background: var(--primary); color: #fff; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 700; margin: 0 auto 16px;">4</div>
        <h4 style="font-size: 16px; font-weight: 700; margin-bottom: 8px;">Leave a Review</h4>
        <p style="font-size: 14px; color: var(--text-light);">Rate your experience to help others</p>
      </div>
    </div>
    <div style="text-align: center; margin-top: 40px;">
      <button class="hero-btn hero-btn-primary" onclick="showPage('howItWorks')">Learn More</button>
    </div>
  </div>

  <footer style="background: var(--bg); border-top: 1px solid var(--border); padding: 60px 20px 40px;">
    <div style="max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 40px;">
      <div>
        <h3 style="font-size: 16px; font-weight: 700; color: var(--text); margin-bottom: 20px;">For Customers</h3>
        <div style="display: flex; flex-direction: column; gap: 12px;">
          <a class="nav-link" onclick="showPage('findProfessionals')" style="cursor: pointer;">Find Professionals by Location</a>
          <a class="nav-link" onclick="showPage('howItWorks')" style="cursor: pointer;">How it works</a>
          <a class="nav-link" onclick="showPage('auth')" style="cursor: pointer;">Login</a>
        </div>
      </div>
      <div>
        <h3 style="font-size: 16px; font-weight: 700; color: var(--text); margin-bottom: 20px;">For Professionals</h3>
        <div style="display: flex; flex-direction: column; gap: 12px;">
          <a class="nav-link" onclick="showHowItWorks('expert'); showPage('howItWorks')" style="cursor: pointer;">How it works</a>
          <a class="nav-link" onclick="showPage('pricing')" style="cursor: pointer;">Pricing</a>
          <a class="nav-link" onclick="showPage('auth')" style="cursor: pointer;">Join as a Professional</a>
          <a class="nav-link" href="/cdn-cgi/l/email-protection#9ae9efeaeaf5e8eedaedf5e8f1f3f4feffe2b4f9f5f7" style="cursor: pointer;">Help centre</a>
        </div>
      </div>
    </div>
    <div style="max-width: 1200px; margin: 40px auto 0; padding-top: 24px; border-top: 1px solid var(--border); text-align: center;">
      <p style="font-size: 14px; color: var(--text-muted);">¬© 2024 WorkIndex. All rights reserved.</p>
    </div>
  </footer>
</div>


<!-- FIND PROFESSIONALS PAGE -->
<div id="findProfessionals" class="page">
  <div class="landing-nav">
    <div class="logo" onclick="showPage('landing')">
      <div class="logo-icon">W</div>
      <span class="logo-text">WorkIndex</span>
    </div>
    <button class="btn-primary" onclick="showPage('auth')">Sign In</button>
  </div>

  <div style="padding: 20px;">
    <h1 class="section-title">Find Verified Professionals</h1>
    <p class="section-subtitle">Browse experts across all services</p>

    <div class="filter-bar">
      <div class="filter-chip active" data-service="all" onclick="filterExperts('all')">All Services</div>
      <div class="filter-chip" data-service="itr" onclick="filterExperts('itr')">ITR Filing</div>
      <div class="filter-chip" data-service="gst" onclick="filterExperts('gst')">GST</div>
      <div class="filter-chip" data-service="accounting" onclick="filterExperts('accounting')">Accounting</div>
      <div class="filter-chip" data-service="audit" onclick="filterExperts('audit')">Audit</div>
      <div class="filter-chip" data-service="photography" onclick="filterExperts('photography')">Photography</div>
      <div class="filter-chip" data-service="development" onclick="filterExperts('development')">Development</div>
    </div>

    <div style="display: flex; gap: 12px; margin: 20px 0;">
      <input type="text" id="expertSearch" placeholder="Search by name or location..." style="flex: 1; padding: 12px; border-radius: 10px; border: 1px solid var(--border); font-size: 15px;">
      <select id="expertSort" onchange="sortExperts(this.value)" style="padding: 12px; border-radius: 10px; border: 1px solid var(--border); font-size: 15px;">
        <option value="rating">Highest Rated</option>
        <option value="reviews">Most Reviews</option>
        <option value="newest">Newest</option>
      </select>
    </div>

    <div id="expertGrid" class="expert-grid"></div>

    <div id="expertsLoading" style="display: none; text-align: center; padding: 40px;">
      <div class="spinner"></div>
      <p style="margin-top: 16px; color: var(--text-muted);">Loading experts...</p>
    </div>

    <div id="expertsEmpty" style="display: none;" class="empty-state">
      <div class="empty-icon">üîç</div>
      <h3 class="empty-title">No experts found</h3>
      <p class="empty-text">Try adjusting your filters or search criteria</p>
    </div>
  </div>
</div>

<!-- HOW IT WORKS PAGE -->
<div id="howItWorks" class="page">
  <div class="landing-nav">
    <div class="logo" onclick="showPage('landing')">
      <div class="logo-icon">W</div>
      <span class="logo-text">WorkIndex</span>
    </div>
    <button class="btn-primary" onclick="showPage('auth')">Get Started</button>
  </div>

  <div style="padding: 20px; max-width: 800px; margin: 0 auto;">
    <h1 class="section-title">How It Works</h1>
    <p class="section-subtitle">Simple, transparent, and secure</p>

    <div class="auth-toggle" style="max-width: 400px; margin: 40px auto;">
      <button class="active" onclick="showHowItWorks('client')">For Customers</button>
      <button onclick="showHowItWorks('expert')">For Professionals</button>
    </div>

    <div id="clientSteps" class="steps-container">
      <div class="step">
        <div class="step-number">1</div>
        <div class="step-content">
          <h3>Post Your Requirement</h3>
          <p>Tell us what you need. Fill a simple form about your project or requirement. It takes less than 2 minutes.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-number">2</div>
        <div class="step-content">
          <h3>Get Expert Approaches</h3>
          <p>Verified professionals will review your requirement and send you personalized approaches with quotes.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-number">3</div>
        <div class="step-content">
          <h3>Choose & Hire</h3>
          <p>Review profiles, ratings, and quotes. Choose the best expert and start working together.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-number">4</div>
        <div class="step-content">
          <h3>Rate Your Experience</h3>
          <p>After work completion, rate and review the expert to help others make informed decisions.</p>
        </div>
      </div>
    </div>

    <div id="expertSteps" class="steps-container" style="display: none;">
      <div class="step">
        <div class="step-number">1</div>
        <div class="step-content">
          <h3>Complete Your Profile</h3>
          <p>Sign up and build your professional profile with your skills, experience, and certifications.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-number">2</div>
        <div class="step-content">
          <h3>Browse Client Requests</h3>
          <p>See all available projects matching your expertise. Read detailed requirements and client questionnaires.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-number">3</div>
        <div class="step-content">
          <h3>Send Approaches</h3>
          <p>Spend credits to unlock client contact details and send personalized proposals with your quote.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-number">4</div>
        <div class="step-content">
          <h3>Get Hired & Earn</h3>
          <p>Build your reputation with 5-star ratings and grow your client base on WorkIndex.</p>
        </div>
      </div>
    </div>

    <div style="text-align: center; margin-top: 40px;">
      <button class="hero-btn hero-btn-primary" onclick="showPage('auth')">Get Started Now</button>
    </div>
  </div>
</div>

<!-- PRICING PAGE -->
<div id="pricing" class="page">
  <div class="landing-nav">
    <div class="logo" onclick="showPage('landing')">
      <div class="logo-icon">W</div>
      <span class="logo-text">WorkIndex</span>
    </div>
    <button class="btn-primary" onclick="showPage('auth')">Sign Up</button>
  </div>

  <div style="padding: 20px;">
    <h1 class="section-title">Simple, Transparent Pricing</h1>
    <p class="section-subtitle">Only pay for what you use. No subscriptions, no hidden fees.</p>

    <div class="pricing-grid">
      <div class="price-card">
        <h3>Starter</h3>
        <div class="price-amount">‚Çπ600<span>/20 credits</span></div>
        <div class="price-per-credit">‚Çπ30 per credit</div>
        <button class="btn-primary" style="width: 100%; margin-top: 20px;" onclick="showPage('auth')">Get Started</button>
      </div>

      <div class="price-card popular">
        <div class="popular-badge">‚≠ê MOST POPULAR</div>
        <h3>Popular</h3>
        <div class="price-amount">‚Çπ2,700<span>/100 credits</span></div>
        <div class="price-per-credit">‚Çπ27 per credit</div>
        <div class="price-savings">Save 10%</div>
        <button class="btn-primary" style="width: 100%; margin-top: 20px;" onclick="showPage('auth')">Get Started</button>
      </div>

      <div class="price-card">
        <h3>Professional</h3>
        <div class="price-amount">‚Çπ4,800<span>/200 credits</span></div>
        <div class="price-per-credit">‚Çπ24 per credit</div>
        <div class="price-savings">Save 20%</div>
        <button class="btn-primary" style="width: 100%; margin-top: 20px;" onclick="showPage('auth')">Get Started</button>
      </div>
    </div>

    <div style="max-width: 800px; margin: 60px auto 40px;">
      <h2 class="section-title" style="font-size: 24px;">Frequently Asked Questions</h2>
      <div class="settings-section">
        <details style="cursor: pointer;">
          <summary style="padding: 16px 0; font-weight: 600; color: var(--text);">How do credits work?</summary>
          <p style="padding: 0 0 16px; color: var(--text-light); line-height: 1.6;">Credits are used to unlock client contact details and send approaches. Each request costs between 15-35 credits depending on the service type.</p>
        </details>
        <details style="cursor: pointer;">
          <summary style="padding: 16px 0; font-weight: 600; color: var(--text); border-top: 1px solid var(--border);">Can I get a refund?</summary>
          <p style="padding: 0 0 16px; color: var(--text-light); line-height: 1.6;">Unused credits never expire and can be used anytime. We don't offer refunds, but you can use credits whenever you're ready.</p>
        </details>
        <details style="cursor: pointer;">
          <summary style="padding: 16px 0; font-weight: 600; color: var(--text); border-top: 1px solid var(--border);">Are there any hidden fees?</summary>
          <p style="padding: 0 0 16px; color: var(--text-light); line-height: 1.6;">No hidden fees! The price you see is what you pay. We believe in transparent pricing.</p>
        </details>
      </div>
    </div>
  </div>
</div>

<!-- SETTINGS PAGE -->
<div id="settings" class="page">
  <div style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid var(--border);">
    <button onclick="goBack()" style="background: none; border: none; color: var(--text); font-size: 24px; cursor: pointer; padding: 0; margin-right: 12px;">‚Üê</button>
    <h2 style="font-size: 18px; font-weight: 700; color: var(--text); flex: 1;">Settings</h2>
  </div>

  <div style="padding: 20px;">
    <div class="settings-section">
      <h3 class="settings-section-title">Appearance</h3>
      <div class="settings-option">
        <div class="settings-option-label">
          <h4>Dark Mode</h4>
          <p>Switch between light and dark theme</p>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>

    <div class="settings-section">
      <h3 class="settings-section-title">Notifications</h3>
      <div class="settings-option">
        <div class="settings-option-label">
          <h4>Email Notifications</h4>
          <p>Get updates via email</p>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="emailNotif" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="settings-option">
        <div class="settings-option-label">
          <h4>SMS Notifications</h4>
          <p>Get updates via SMS</p>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="smsNotif">
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>

    <div class="settings-section">
      <h3 class="settings-section-title">Account</h3>
      <div class="settings-option" onclick="logout()">
        <div class="settings-option-label">
          <h4 style="color: var(--red);">Logout</h4>
          <p>Sign out of your account</p>
        </div>
        <span style="color: var(--red);">‚Ä∫</span>
      </div>
    </div>

    <div class="settings-section">
      <h3 class="settings-section-title">About</h3>
      <div class="settings-option">
        <div class="settings-option-label">
          <h4>Version</h4>
          <p>WorkIndex v2.0</p>
        </div>
      </div>
      <div class="settings-option">
        <div class="settings-option-label">
          <h4>Help & Support</h4>
          <p><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="6b181e1b1b04191f2b1c04190002050f0e1345080406">[email&#160;protected]</a></p>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- AUTH PAGE -->
<div id="auth" class="page">
  <!-- Back Button -->
  <div style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid var(--border);">
    <button onclick="showPage('landing')" style="background: none; border: none; color: var(--text); font-size: 24px; cursor: pointer; padding: 0; margin-right: 12px;">‚Üê</button>
    <h2 style="font-size: 18px; font-weight: 700; color: var(--text);">Back to Home</h2>
  </div>

  <div style="padding: 20px;">
    <h1 class="section-title">Welcome to WorkIndex</h1>
    <p class="section-subtitle">Sign in to continue</p>
    
    <div class="auth-card" style="max-width: 400px; margin: 40px auto;">
      <div class="auth-toggle">
        <button id="loginBtn" class="active" onclick="switchAuthMode('login')">Login</button>
        <button id="signupBtn" onclick="switchAuthMode('signup')">Sign Up</button>
      </div>

      <!-- Login Form -->
      <div id="loginForm">
        <!-- Role Selection for Login -->
        <div class="field">
          <label>Login as</label>
          <div class="role-pick">
            <div class="role-card active" id="loginRoleClient" onclick="selectLoginRole('client')">
              <div class="r-icon">üë§</div>
              <div class="r-label">Customer</div>
            </div>
            <div class="role-card" id="loginRoleExpert" onclick="selectLoginRole('expert')">
              <div class="r-icon">‚≠ê</div>
              <div class="r-label">Professional</div>
            </div>
          </div>
        </div>

        <div class="field">
          <label>Email</label>
          <input type="email" id="loginEmail" placeholder="your@email.com">
        </div>
        <div class="field">
          <label>Password</label>
          <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        </div>
        <button class="btn-primary" style="width: 100%;" onclick="handleLogin()">Login</button>
      </div>

      <!-- Signup Form -->
      <div id="signupForm" style="display: none;">
        <div class="field">
          <label>Full Name</label>
          <input type="text" id="signupName" placeholder="John Doe">
        </div>
        <div class="field">
          <label>Email</label>
          <input type="email" id="signupEmail" placeholder="your@email.com">
        </div>
        <div class="field">
          <label>Phone</label>
          <input type="tel" id="signupPhone" placeholder="9876543210" maxlength="10">
        </div>
        <div class="field">
          <label>Password</label>
          <input type="password" id="signupPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        </div>
        <div class="field">
          <label>I am a</label>
          <div class="role-pick">
            <div class="role-card" id="roleClient" onclick="selectRole('client')">
              <div class="r-icon">üë§</div>
              <div class="r-label">Client</div>
            </div>
            <div class="role-card active" id="roleExpert" onclick="selectRole('expert')">
              <div class="r-icon">‚≠ê</div>
              <div class="r-label">Expert</div>
            </div>
          </div>
        </div>
        <button class="btn-primary" style="width: 100%;" onclick="handleSignup()">Create Account</button>
      </div>
    </div>
  </div>
</div>

<!-- QUESTIONNAIRE -->
<div id="questionnaire" class="page">
  <div style="background: var(--bg); padding: 16px 20px; border-bottom: 1px solid var(--border);">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 12px;">
      <div id="qStepText" style="font-size: 14px; font-weight: 600; color: var(--text-muted);">Step 1 of 8</div>
      <button onclick="if(confirm('Exit questionnaire? Progress will be lost.')){showPage('landing')}" style="padding:6px 12px; border:1px solid var(--border); border-radius:8px; background:var(--bg); color:var(--text); font-size:12px; font-weight:600; cursor:pointer;">Exit</button>
    </div>
    <div style="height: 4px; background: var(--bg-gray); border-radius: 2px; overflow: hidden;">
      <div id="qProgressFill" style="width:0%; height:100%; background:var(--primary); transition: width 0.3s;"></div>
    </div>
  </div>

  <div id="qContent" style="padding: 24px 20px; min-height: 60vh;"></div>

  <div style="position: fixed; bottom: 0; left: 0; right: 0; padding: 16px 20px; background: var(--bg); border-top: 1px solid var(--border); display: flex; gap: 12px;">
    <button id="qBackBtn" onclick="qBack()" style="display:none; flex: 1; padding: 14px; border: 1.5px solid var(--border); border-radius: 10px; background: var(--bg); color: var(--text); font-size: 15px; font-weight: 600; cursor: pointer;">‚Üê Back</button>
    <button id="qNextBtn" onclick="qNext()" class="btn-primary" style="flex: 2; padding: 14px; font-size: 15px; opacity: 0.5; cursor: not-allowed;" disabled>Continue</button>
  </div>
</div>


<!-- CLIENT DASHBOARD -->
<div id="clientDash" class="page">
  <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px 20px; border-bottom: 1px solid var(--border);">
    <div class="logo">
      <div class="logo-icon">W</div>
      <span class="logo-text">WorkIndex</span>
    </div>
    <div style="display: flex; gap: 12px; align-items: center;">
      <button onclick="showPage('settings')" style="padding: 8px; border: none; background: transparent; cursor: pointer;">‚öôÔ∏è</button>
      <div class="avatar" id="clientAvatar">C</div>
    </div>
  </div>

  <!-- Tabs -->
  <div style="display: flex; border-bottom: 1px solid var(--border); overflow-x: auto;">
    <div class="dash-tab active" data-tab="requests" onclick="switchTab('requests')">
      <span>üìã</span>
      <span>Requests</span>
    </div>
    <div class="dash-tab" data-tab="documents" onclick="switchTab('documents')">
      <span>üìÑ</span>
      <span>Documents</span>
    </div>
    <div class="dash-tab" data-tab="access" onclick="switchTab('access')">
      <span>üîê</span>
      <span>Access</span>
      <div id="accessBadge" style="display: none; background: var(--red); color: #fff; border-radius: 10px; padding: 2px 6px; font-size: 11px; margin-left: 4px;"></div>
    </div>
    <div class="dash-tab" data-tab="profile" onclick="switchTab('profile')">
      <span>üë§</span>
      <span>Profile</span>
    </div>
  </div>

  <!-- Requests Tab -->
  <div id="requestsTab" class="tab-content" style="padding: 20px;">
    <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
      <h2>My Requests</h2>
      <button class="btn-primary" onclick="showNewRequestForm()">+ New Request</button>
    </div>
    <div id="requestsList"></div>
  </div>

  <!-- Documents Tab -->
  <div id="documentsTab" class="tab-content" style="display: none; padding: 20px;">
    <h2 style="margin-bottom: 20px;">My Documents</h2>
    
    <div class="upload-area" id="uploadArea" onclick="document.getElementById('fileInput').click()">
      <div style="font-size: 48px; margin-bottom: 12px;">üìÅ</div>
      <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">Click to upload or drag & drop</div>
      <div style="font-size: 14px; color: var(--text-muted);">PDF, Excel, Images (Max 10MB)</div>
      <input type="file" id="fileInput" style="display: none;" accept=".pdf,.xlsx,.xls,.jpg,.jpeg,.png" onchange="handleFileUpload(event)">
    </div>

    <div id="uploadProgress" style="display: none; margin: 20px 0;">
      <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
        <span style="font-size: 14px; font-weight: 600;">Uploading...</span>
        <span id="uploadPercent" style="font-size: 14px; color: var(--text-muted);">0%</span>
      </div>
      <div class="progress-bar">
        <div id="uploadProgressBar" class="progress-fill" style="width: 0%"></div>
      </div>
    </div>

    <div id="documentsList"></div>

    <div id="documentsEmpty" class="empty-state">
      <div class="empty-icon">üìÑ</div>
      <h3 class="empty-title">No documents yet</h3>
      <p class="empty-text">Upload your first document to get started</p>
    </div>
  </div>

  <!-- Access Requests Tab -->
  <div id="accessTab" class="tab-content" style="display: none; padding: 20px;">
    <h2 style="margin-bottom: 20px;">Access Requests</h2>
    <p style="color: var(--text-muted); margin-bottom: 20px;">Manage document access requests from experts</p>
    
    <div id="accessRequestsList"></div>

    <div id="accessEmpty" class="empty-state">
      <div class="empty-icon">üîê</div>
      <h3 class="empty-title">No access requests</h3>
      <p class="empty-text">Experts will request access to your documents here</p>
    </div>
  </div>

  <!-- Profile Tab -->
  <div id="profileTab" class="tab-content" style="display: none; padding: 20px;">
    <div style="text-align: center; margin-bottom: 30px;">
      <div class="avatar-upload">
        <div class="avatar avatar-xl" id="profileAvatar">C</div>
        <button class="avatar-upload-btn" onclick="document.getElementById('profilePhotoInput').click()">
          üì∑
        </button>
        <input type="file" id="profilePhotoInput" style="display: none;" accept="image/*" onchange="uploadProfilePhoto(event)">
      </div>
      <h2 style="margin-top: 16px;" id="profileName">Client Name</h2>
      <p style="color: var(--text-muted);" id="profileEmail"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="42272f232b2e02273a232f322e276c212d2f">[email&#160;protected]</a></p>
    </div>

    <div class="settings-section">
      <h3 class="settings-section-title">Account Details</h3>
      <div style="padding: 12px 0; border-bottom: 1px solid var(--border);">
        <div style="font-size: 13px; color: var(--text-muted); margin-bottom: 4px;">Phone</div>
        <div style="font-size: 15px; font-weight: 600;" id="profilePhone">+91 9876543210</div>
      </div>
      <div style="padding: 12px 0;">
        <div style="font-size: 13px; color: var(--text-muted); margin-bottom: 4px;">Member Since</div>
        <div style="font-size: 15px; font-weight: 600;">February 2024</div>
      </div>
    </div>
  </div>
</div>

<!-- EXPERT DASHBOARD -->
<div id="expertDash" class="page">
  <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px 20px; border-bottom: 1px solid var(--border);">
    <div class="logo">
      <div class="logo-icon">W</div>
      <span class="logo-text">WorkIndex</span>
    </div>
    <div style="display: flex; gap: 12px; align-items: center;">
      <div style="padding: 6px 12px; background: var(--primary); color: #fff; border-radius: 20px; font-size: 14px; font-weight: 600; cursor: pointer;" onclick="openCreditModal()">
        üíé <span id="expertCredits" class="credit-display">0</span>
      </div>
      <button onclick="showPage('settings')" style="padding: 8px; border: none; background: transparent; cursor: pointer;">‚öôÔ∏è</button>
      <div class="avatar" id="expertAvatar">E</div>
    </div>
  </div>

  <!-- Tabs -->
  <div style="display: flex; border-bottom: 1px solid var(--border); overflow-x: auto;">
    <div class="dash-tab active" data-tab="browse" onclick="switchTab('browse')">
      <span>üîç</span>
      <span>Browse</span>
    </div>
    <div class="dash-tab" data-tab="approaches" onclick="switchTab('approaches')">
      <span>üí¨</span>
      <span>Approaches</span>
    </div>
    <div class="dash-tab" data-tab="ratings" onclick="switchTab('ratings')">
      <span>‚≠ê</span>
      <span>Reviews</span>
    </div>
    <div class="dash-tab" data-tab="profile" onclick="switchTab('profile')">
      <span>üë§</span>
      <span>Profile</span>
    </div>
  </div>

  <!-- Browse Tab -->
  <div id="browseTab" class="tab-content" style="padding: 20px;">
    <h2 style="margin-bottom: 20px;">Available Requests</h2>
    <div id="browseList"></div>
  </div>

  <!-- Approaches Tab -->
  <div id="approachesTab" class="tab-content" style="display: none; padding: 20px;">
    <h2 style="margin-bottom: 20px;">My Approaches</h2>
    <div id="approachesList"></div>
  </div>

  <!-- Ratings Tab -->
  <div id="ratingsTab" class="tab-content" style="display: none; padding: 20px;">
    <h2 style="margin-bottom: 20px;">My Reviews</h2>
    
    <div class="settings-section">
      <div style="display: flex; gap: 24px; margin-bottom: 24px;">
        <div>
          <div style="font-size: 48px; font-weight: 700;" id="avgRating">0.0</div>
          <div class="rating-stars">
            <span class="star filled">‚òÖ</span>
            <span class="star filled">‚òÖ</span>
            <span class="star filled">‚òÖ</span>
            <span class="star filled">‚òÖ</span>
            <span class="star">‚òÖ</span>
          </div>
          <div style="font-size: 14px; color: var(--text-muted); margin-top: 8px;" id="reviewCount">0 reviews</div>
        </div>
        <div style="flex: 1;">
          <div id="ratingBars" class="rating-bars"></div>
        </div>
      </div>
    </div>

    <div id="reviewsList"></div>

    <div id="reviewsEmpty" class="empty-state">
      <div class="empty-icon">‚≠ê</div>
      <h3 class="empty-title">No reviews yet</h3>
      <p class="empty-text">Complete projects to receive ratings from clients</p>
    </div>
  </div>

  <!-- Profile Tab -->
  <div id="profileTab" class="tab-content" style="display: none; padding: 20px;">
    <div style="text-align: center; margin-bottom: 30px;">
      <div class="avatar-upload">
        <div class="avatar avatar-xl" id="expertProfileAvatar">E</div>
        <button class="avatar-upload-btn" onclick="document.getElementById('expertPhotoInput').click()">
          üì∑
        </button>
        <input type="file" id="expertPhotoInput" style="display: none;" accept="image/*" onchange="uploadProfilePhoto(event)">
      </div>
      <h2 style="margin-top: 16px;" id="expertProfileName">Expert Name</h2>
      <p style="color: var(--text-muted);" id="expertProfileEmail"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="3c59515d55507c59445d514c5059125f5351">[email&#160;protected]</a></p>
    </div>
  </div>
</div>


<!-- ‚ïê‚ïê‚ïê MODALS ‚ïê‚ïê‚ïê -->

<!-- Rating Modal -->
<div id="ratingModal" class="modal-overlay" onclick="closeRatingModal(event)">
  <div class="modal-sheet" onclick="event.stopPropagation()">
    <div class="modal-handle"></div>
    <div class="modal-header">
      <h3 class="modal-title">Rate Expert</h3>
      <p class="modal-subtitle" id="ratingExpertName"></p>
    </div>
    <div class="modal-body">
      <div style="text-align: center; margin-bottom: 32px;">
        <div style="font-size: 14px; font-weight: 600; margin-bottom: 12px;">How was your experience?</div>
        <div class="rating-stars" style="justify-content: center;">
          <span class="star large" data-rating="1" onclick="selectRating(1)">‚òÖ</span>
          <span class="star large" data-rating="2" onclick="selectRating(2)">‚òÖ</span>
          <span class="star large" data-rating="3" onclick="selectRating(3)">‚òÖ</span>
          <span class="star large" data-rating="4" onclick="selectRating(4)">‚òÖ</span>
          <span class="star large" data-rating="5" onclick="selectRating(5)">‚òÖ</span>
        </div>
      </div>
      <div class="field">
        <label>Write your review</label>
        <textarea id="reviewText" rows="4" placeholder="Share details of your experience..."></textarea>
      </div>
      <div class="field">
        <label style="display: flex; align-items: center; gap: 12px; cursor: pointer;">
          <input type="checkbox" id="wouldRecommend" checked style="width: 20px; height: 20px;">
          <span>I would recommend this expert</span>
        </label>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-outline" onclick="closeRatingModal()" style="flex: 1;">Cancel</button>
      <button class="btn-primary" onclick="submitRating()" style="flex: 1;">Submit Review</button>
    </div>
  </div>
</div>

<!-- Credit Purchase Modal -->
<div id="creditModal" class="modal-overlay" onclick="closeCreditModal(event)">
  <div class="modal-sheet" onclick="event.stopPropagation()">
    <div class="modal-handle"></div>
    <div class="modal-header">
      <h3 class="modal-title">Purchase Credits</h3>
      <p class="modal-subtitle">Choose a package that suits you</p>
    </div>
    <div class="modal-body">
      <div style="display: flex; flex-direction: column; gap: 12px;">
        <label style="cursor: pointer; display: flex; align-items: center; padding: 16px; border: 2px solid var(--border); border-radius: 12px;">
          <input type="radio" name="creditPack" value="20" data-price="600" style="margin-right: 12px;">
          <div>
            <div style="font-size: 16px; font-weight: 700;">20 Credits - ‚Çπ600</div>
            <div style="font-size: 13px; color: var(--text-muted);">‚Çπ30 per credit</div>
          </div>
        </label>

        <label style="cursor: pointer; display: flex; align-items: center; padding: 16px; border: 2px solid var(--primary); border-radius: 12px; background: rgba(252, 128, 25, 0.05); position: relative;">
          <div style="position: absolute; top: -10px; right: 10px; background: var(--primary); color: #fff; padding: 4px 12px; border-radius: 12px; font-size: 11px; font-weight: 700;">‚≠ê POPULAR</div>
          <input type="radio" name="creditPack" value="100" data-price="2700" checked style="margin-right: 12px;">
          <div>
            <div style="font-size: 16px; font-weight: 700;">100 Credits - ‚Çπ2,700</div>
            <div style="font-size: 13px; color: var(--text-muted);">‚Çπ27 per credit ‚Ä¢ Save 10%</div>
          </div>
        </label>

        <label style="cursor: pointer; display: flex; align-items: center; padding: 16px; border: 2px solid var(--border); border-radius: 12px;">
          <input type="radio" name="creditPack" value="200" data-price="4800" style="margin-right: 12px;">
          <div>
            <div style="font-size: 16px; font-weight: 700;">200 Credits - ‚Çπ4,800</div>
            <div style="font-size: 13px; color: var(--text-muted);">‚Çπ24 per credit ‚Ä¢ Save 20%</div>
          </div>
        </label>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-outline" onclick="closeCreditModal()" style="flex: 1;">Cancel</button>
      <button class="btn-primary" onclick="proceedToPayment()" style="flex: 1;">Proceed to Payment</button>
    </div>
  </div>
</div>

<!-- Payment Modal (UPI Mockup) -->
<div id="paymentModal" class="modal-overlay" onclick="closePaymentModal(event)">
  <div class="modal-sheet" onclick="event.stopPropagation()">
    <div class="modal-handle"></div>
    <div class="modal-header">
      <h3 class="modal-title">Complete Payment</h3>
      <p class="modal-subtitle">Scan QR or pay via UPI</p>
    </div>
    <div class="modal-body" style="text-align: center;">
      <div style="width: 200px; height: 200px; margin: 20px auto; background: var(--bg-gray); border: 2px solid var(--border); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 64px;">
        üì±
      </div>
      <div style="margin: 20px 0;">
        <div style="font-size: 32px; font-weight: 700; color: var(--text);" id="paymentAmount">‚Çπ2,700</div>
        <div style="font-size: 14px; color: var(--text-muted);" id="paymentCredits">100 Credits</div>
      </div>
      <div style="background: var(--bg-gray); padding: 16px; border-radius: 12px; margin: 20px 0;">
        <div style="font-size: 13px; color: var(--text-muted); margin-bottom: 8px;">UPI ID</div>
        <div style="font-size: 16px; font-weight: 600; color: var(--text);">workindex@upi</div>
      </div>
      <div style="font-size: 13px; color: var(--text-light); line-height: 1.6;">
        This is a demo payment. In production, you'll use real UPI payment gateway.
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-outline" onclick="closePaymentModal()" style="flex: 1;">Cancel</button>
      <button class="btn-primary" onclick="confirmPayment()" style="flex: 1;">I've Paid</button>
    </div>
  </div>
</div>

<!-- External JavaScript -->
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="app.js"></script>

<!-- Helper Functions -->
<script>
// Login role selection
let selectedLoginRole = 'client';

function selectLoginRole(role) {
  selectedLoginRole = role;
  document.getElementById('loginRoleClient').classList.toggle('active', role === 'client');
  document.getElementById('loginRoleExpert').classList.toggle('active', role === 'expert');
}

// Auth mode switching
function switchAuthMode(mode) {
  const loginForm = document.getElementById('loginForm');
  const signupForm = document.getElementById('signupForm');
  const loginBtn = document.getElementById('loginBtn');
  const signupBtn = document.getElementById('signupBtn');
  
  if (mode === 'login') {
    loginForm.style.display = 'block';
    signupForm.style.display = 'none';
    loginBtn.classList.add('active');
    signupBtn.classList.remove('active');
  } else {
    loginForm.style.display = 'none';
    signupForm.style.display = 'block';
    loginBtn.classList.remove('active');
    signupBtn.classList.add('active');
  }
}

// Signup role selection
let selectedRole = 'expert';

function selectRole(role) {
  selectedRole = role;
  document.getElementById('roleClient').classList.toggle('active', role === 'client');
  document.getElementById('roleExpert').classList.toggle('active', role === 'expert');
}

// Login handler
function handleLogin() {
  const email = document.getElementById('loginEmail').value;
  const password = document.getElementById('loginPassword').value;
  
  if (!email || !password) {
    alert('Please fill all fields');
    return;
  }
  
  // Use app.js login function with role
  login(email, password);
}

// Signup handler
function handleSignup() {
  const name = document.getElementById('signupName').value;
  const email = document.getElementById('signupEmail').value;
  const phone = document.getElementById('signupPhone').value;
  const password = document.getElementById('signupPassword').value;
  
  if (!name || !email || !phone || !password) {
    alert('Please fill all fields');
    return;
  }
  
  // Use app.js register function
  register({ name, email, phone, password, role: selectedRole });
}

// New request form
function showNewRequestForm() {
  startQuestionnaire();
}

// ‚ïê‚ïê‚ïê QUESTIONNAIRE SYSTEM ‚ïê‚ïê‚ïê

// NOTE: In app.js, modify the register() function to call startQuestionnaire()
// after successful registration instead of enterDashboard():
//
// After: state.user = data.user; localStorage.setItem('user', JSON.stringify(state.user));
// Call: startQuestionnaire(); instead of: enterDashboard();

const Q_FORMS = {
  service: {
    title: "What service do you need?",
    subtitle: "Select the category",
    type: "single",
    key: "service",
    options: [
      { value: "itr", icon: "üìÑ", label: "ITR Filing", desc: "Income Tax Return" },
      { value: "gst", icon: "üè¢", label: "GST Services", desc: "Registration, filing" },
      { value: "accounting", icon: "üìä", label: "Accounting", desc: "Bookkeeping" },
      { value: "audit", icon: "üîç", label: "Audit Services", desc: "Statutory audit" },
      { value: "photography", icon: "üì∏", label: "Photography", desc: "Events, product" },
      { value: "development", icon: "üíª", label: "App/Web Dev", desc: "Build digital products" }
    ]
  },
  
  itr_for: { condition: { service: "itr" }, title: "Who is the return for?", type: "single", key: "itrFor", options: [{ value: "individual", label: "Individual" }, { value: "freelancer", label: "Freelancer" }, { value: "business", label: "Business" }] },
  itr_income_source: { condition: { service: "itr" }, title: "Sources of income?", subtitle: "Select all", type: "multi", key: "incomeSource", options: [{ value: "salary", label: "Salary" }, { value: "business", label: "Business" }, { value: "rental", label: "Rental" }, { value: "capital", label: "Capital Gains" }, { value: "other", label: "Other" }] },
  itr_income_bracket: { condition: { service: "itr" }, title: "Annual income?", type: "single", key: "incomeBracket", options: [{ value: "below5", label: "Below ‚Çπ5L" }, { value: "5-10", label: "‚Çπ5-10L" }, { value: "10-15", label: "‚Çπ10-15L" }, { value: "15-20", label: "‚Çπ15-20L" }, { value: "20-25", label: "‚Çπ20-25L" }, { value: "25+", label: ">‚Çπ25L" }] },
  
  gst_service: { condition: { service: "gst" }, title: "What GST service?", type: "single", key: "gstService", options: [{ value: "registration", label: "New Registration" }, { value: "monthly", label: "Monthly Filing" }, { value: "annual", label: "Annual Return" }] },
  gst_turnover: { condition: { service: "gst" }, title: "Annual turnover?", type: "single", key: "turnover", options: [{ value: "below20", label: "< ‚Çπ20L" }, { value: "20-1cr", label: "‚Çπ20L-1Cr" }, { value: "1-5cr", label: "‚Çπ1-5Cr" }, { value: "20cr+", label: "‚Çπ20Cr+" }] },
  
  timeline: { title: "When do you need this?", type: "single", key: "timeline", options: [{ value: "immediate", icon: "üî¥", label: "Immediate" }, { value: "week", icon: "üü†", label: "Within week" }, { value: "month", icon: "üü°", label: "Within month" }, { value: "flexible", icon: "üü¢", label: "Flexible" }] },
  budget: { title: "Budget range?", subtitle: "Select amount", type: "single", key: "budget", options: [
    { value: "500", label: "‚Çπ500" }, { value: "1000", label: "‚Çπ1,000" }, { value: "1500", label: "‚Çπ1,500" }, 
    { value: "2000", label: "‚Çπ2,000" }, { value: "2500", label: "‚Çπ2,500" }, { value: "3000", label: "‚Çπ3,000" },
    { value: "3500", label: "‚Çπ3,500" }, { value: "4000", label: "‚Çπ4,000" }, { value: "4500", label: "‚Çπ4,500" },
    { value: "5000", label: "‚Çπ5,000" }, { value: "6000", label: "‚Çπ6,000" }, { value: "7000", label: "‚Çπ7,000" },
    { value: "8000", label: "‚Çπ8,000" }, { value: "9000", label: "‚Çπ9,000" }, { value: "10000", label: "‚Çπ10,000" },
    { value: "12000", label: "‚Çπ12,000" }, { value: "15000", label: "‚Çπ15,000" }, { value: "20000", label: "‚Çπ20,000" }
  ] },
  details: { title: "Additional details", type: "textarea", key: "details", placeholder: "Describe your requirement..." },
  location: { title: "Your location", type: "input", key: "location", inputType: "text", placeholder: "City, State" },
  
  expert_services: {
    title: "What services do you provide?",
    subtitle: "Select all that apply",
    type: "multi",
    key: "servicesOffered",
    options: [
      { value: "itr", label: "ITR Filing" },
      { value: "gst", label: "GST Services" },
      { value: "accounting", label: "Accounting" },
      { value: "audit", label: "Audit" },
      { value: "photography", label: "Photography" },
      { value: "development", label: "Development" }
    ]
  },
  
  expert_specialization: {
    title: "What's your specialization?",
    type: "input",
    key: "specialization",
    inputType: "text",
    placeholder: "e.g., Chartered Accountant, Tax Consultant"
  },
  
  expert_experience: {
    title: "Years of experience?",
    type: "single",
    key: "experience",
    options: [
      { value: "1-3", label: "1-3 years" },
      { value: "3-5", label: "3-5 years" },
      { value: "5-10", label: "5-10 years" },
      { value: "10+", label: "10+ years" }
    ]
  },
  
  expert_location: { title: "Your location", type: "input", key: "location", inputType: "text", placeholder: "City, State" },
  expert_bio: { title: "About you", type: "textarea", key: "bio", placeholder: "Tell clients about your expertise..." }
};

// Questionnaire state
let qState = {
  step: 0,
  sequence: [],
  answers: {}
};

function buildQuestionSequence() {
  const role = state.user?.role || selectedRole;
  let seq = [];
  
  if (role === 'expert') {
    seq = ['expert_services', 'expert_specialization', 'expert_experience', 'expert_location', 'expert_bio'];
  } else {
    seq = ['service'];
    const service = qState.answers.service;
    
    if (service === 'itr') {
      seq.push('itr_for', 'itr_income_source', 'itr_income_bracket');
    } else if (service === 'gst') {
      seq.push('gst_service', 'gst_turnover');
    }
    
    seq.push('timeline', 'budget', 'details', 'location');
  }
  
  return seq;
}

function startQuestionnaire() {
  qState = { step: 0, sequence: buildQuestionSequence(), answers: {} };
  showPage('questionnaire');
  renderQuestion();
}

function renderQuestion() {
  const stepKey = qState.sequence[qState.step];
  const question = Q_FORMS[stepKey];
  
  if (!question) return;
  
  const content = document.getElementById('qContent');
  const nextBtn = document.getElementById('qNextBtn');
  const backBtn = document.getElementById('qBackBtn');
  
  // Update progress
  const progress = ((qState.step + 1) / qState.sequence.length) * 100;
  document.getElementById('qProgressFill').style.width = progress + '%';
  document.getElementById('qStepText').textContent = `Step ${qState.step + 1} of ${qState.sequence.length}`;
  
  // Show/hide back button
  backBtn.style.display = qState.step > 0 ? 'block' : 'none';
  
  // Render question
  let html = `
    <h2 style="font-size: 24px; font-weight: 700; color: var(--text); margin-bottom: 8px;">${question.title}</h2>
    ${question.subtitle ? `<p style="font-size: 14px; color: var(--text-muted); margin-bottom: 24px;">${question.subtitle}</p>` : ''}
  `;
  
  if (question.type === 'single') {
    html += '<div style="display: flex; flex-direction: column; gap: 12px;">';
    question.options.forEach(opt => {
      const isSelected = qState.answers[question.key] === opt.value;
      html += `
        <div onclick="selectOption('${question.key}', '${opt.value}')" style="padding: 16px; border: 2px solid ${isSelected ? 'var(--primary)' : 'var(--border)'}; border-radius: 12px; cursor: pointer; background: ${isSelected ? 'rgba(252, 128, 25, 0.05)' : 'var(--bg)'}; transition: all 0.2s;">
          <div style="display: flex; align-items: center; gap: 12px;">
            ${opt.icon ? `<span style="font-size: 24px;">${opt.icon}</span>` : ''}
            <div style="flex: 1;">
              <div style="font-size: 15px; font-weight: 600; color: var(--text);">${opt.label}</div>
              ${opt.desc ? `<div style="font-size: 13px; color: var(--text-muted); margin-top: 2px;">${opt.desc}</div>` : ''}
            </div>
            <div style="width: 20px; height: 20px; border: 2px solid ${isSelected ? 'var(--primary)' : 'var(--border)'}; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
              ${isSelected ? '<div style="width: 10px; height: 10px; background: var(--primary); border-radius: 50%;"></div>' : ''}
            </div>
          </div>
        </div>
      `;
    });
    html += '</div>';
  } else if (question.type === 'multi') {
    html += '<div style="display: flex; flex-direction: column; gap: 12px;">';
    question.options.forEach(opt => {
      const isSelected = (qState.answers[question.key] || []).includes(opt.value);
      html += `
        <div onclick="toggleOption('${question.key}', '${opt.value}')" style="padding: 16px; border: 2px solid ${isSelected ? 'var(--primary)' : 'var(--border)'}; border-radius: 12px; cursor: pointer; background: ${isSelected ? 'rgba(252, 128, 25, 0.05)' : 'var(--bg)'};">
          <div style="display: flex; align-items: center; gap: 12px;">
            <div style="width: 20px; height: 20px; border: 2px solid ${isSelected ? 'var(--primary)' : 'var(--border)'}; border-radius: 4px; display: flex; align-items: center; justify-content: center; background: ${isSelected ? 'var(--primary)' : 'transparent'};">
              ${isSelected ? '<span style="color: #fff; font-size: 14px;">‚úì</span>' : ''}
            </div>
            <div style="font-size: 15px; font-weight: 600; color: var(--text);">${opt.label}</div>
          </div>
        </div>
      `;
    });
    html += '</div>';
  } else if (question.type === 'input') {
    html += `<input type="${question.inputType}" id="qInput" value="${qState.answers[question.key] || ''}" placeholder="${question.placeholder}" style="width: 100%; padding: 14px; border: 2px solid var(--border); border-radius: 10px; font-size: 15px; font-family: inherit;" oninput="updateInput('${question.key}', this.value)">`;
  } else if (question.type === 'textarea') {
    html += `<textarea id="qTextarea" rows="6" placeholder="${question.placeholder}" style="width: 100%; padding: 14px; border: 2px solid var(--border); border-radius: 10px; font-size: 15px; font-family: inherit; resize: vertical;" oninput="updateInput('${question.key}', this.value)">${qState.answers[question.key] || ''}</textarea>`;
  }
  
  content.innerHTML = html;
  
  // Enable/disable next button
  checkCanProceed();
}

function selectOption(key, value) {
  qState.answers[key] = value;
  renderQuestion();
}

function toggleOption(key, value) {
  if (!qState.answers[key]) qState.answers[key] = [];
  const idx = qState.answers[key].indexOf(value);
  if (idx > -1) {
    qState.answers[key].splice(idx, 1);
  } else {
    qState.answers[key].push(value);
  }
  renderQuestion();
}

function updateInput(key, value) {
  qState.answers[key] = value;
  checkCanProceed();
}

function checkCanProceed() {
  const stepKey = qState.sequence[qState.step];
  const question = Q_FORMS[stepKey];
  const answer = qState.answers[question.key];
  const nextBtn = document.getElementById('qNextBtn');
  
  let canProceed = false;
  if (question.type === 'multi') {
    canProceed = answer && answer.length > 0;
  } else {
    canProceed = answer && answer.trim().length > 0;
  }
  
  if (canProceed) {
    nextBtn.disabled = false;
    nextBtn.style.opacity = '1';
    nextBtn.style.cursor = 'pointer';
  } else {
    nextBtn.disabled = true;
    nextBtn.style.opacity = '0.5';
    nextBtn.style.cursor = 'not-allowed';
  }
}

function qNext() {
  if (qState.step < qState.sequence.length - 1) {
    qState.step++;
    renderQuestion();
  } else {
    submitQuestionnaire();
  }
}

function qBack() {
  if (qState.step > 0) {
    qState.step--;
    renderQuestion();
  }
}

async function submitQuestionnaire() {
  const role = state.user?.role || selectedRole;
  
  if (role === 'expert') {
    // Update expert profile
    try {
      const res = await fetch(`${API_URL}/users/profile`, {
        method: 'PUT',
        headers: {
          'Authorization': `Bearer ${state.token}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(qState.answers)
      });
      
      const data = await res.json();
      if (data.success) {
        state.user = { ...state.user, ...qState.answers };
        localStorage.setItem('user', JSON.stringify(state.user));
        showToast('Profile completed!', 'success');
        showPage('expertDash');
      }
    } catch (error) {
      console.error('Profile update error:', error);
      showToast('Failed to update profile', 'error');
    }
  } else {
    // Create client request
    try {
      const service = qState.answers.service;
      const serviceLabels = {
        itr: 'ITR Filing',
        gst: 'GST Services',
        accounting: 'Accounting',
        audit: 'Audit Services',
        photography: 'Photography',
        development: 'App/Web Development'
      };
      
      const title = serviceLabels[service] || service;
      const description = qState.answers.details || 'Request details in questionnaire';
      
      const res = await fetch(`${API_URL}/requests`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${state.token}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          service,
          title,
          description,
          answers: qState.answers,
          timeline: qState.answers.timeline,
          budget: qState.answers.budget,
          location: qState.answers.location
        })
      });
      
      const data = await res.json();
      if (data.success) {
        showToast('Request posted successfully!', 'success');
        showPage('clientDash');
        loadClientData();
      } else {
        showToast(data.message || 'Failed to post request', 'error');
      }
    } catch (error) {
      console.error('Post request error:', error);
      showToast('Failed to post request', 'error');
    }
  }
}

</script>

</body>
</html>

